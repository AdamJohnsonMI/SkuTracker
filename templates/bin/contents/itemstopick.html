{% extends 'base.html' %}

{% block content %}

<h1>{% block title %} Pick Item(s). Listed items need to be picked {% endblock %}</h1>

<table class="table table-dark">
  <thead>
    <tr>
      <th scope="col">Content ID</th>
      <th scope="col">Location ID</th>
      <th scope="col">ASIN</th>
      <th scope="col">Description</th>
      <th scope="col">Quantity</th>
      <th scope="col">Quantity to Pick</th>
      <th scope="col">Bin Item</th>
      

      
    </tr>
  </thead>
  <tbody>
      {% for bin in items %}
    <tr>
        <td>{{ bin['contentid'] }}</td>
        <td>{{ bin['locationid'] }}</td>
        <td>{{ bin['asinid'] }}</td>
        <td>{{ bin['description'] }}</td>
        <td>{{ bin['quantity'] }}</td>
        <td>{{ bin['pickquantity'] }}</td>
        <td> 
        
        <form method="post" name ="form1" id="myForm">
            <div class="form-group mx-sm-3 mb-2">
                <input type="text" class="form-control" id="quantity" placeholder="Quantity Picked" name="quantity">
                <input type="hidden" id="hiddenqty"  value="{{bin['quantity']}}"> 
                <input type="hidden" id="hiddendata"  value="{{bin['contentid']}}">
                <input type="hidden" id="damaged" name="damaged" value="{{bin['damaged']}}">  
                <button type="submit" class="btn btn-primary mb-2" onClick="return checkform();" >Confirm Pick</button>
              </div>
          
          </form>    
        </td>
      </tr>
      
    {% endfor %}
  </tbody>
</table>


<script>
    function checkform(){
    var form1 = document.getElementById('myForm');
    var userqty = parseInt(form1.quantity.value)
    var dbqty = parseInt(form1.hiddenqty.value)
    var damaged = 0
    var missing = 0
    alert(damaged)
    if(userqty < (dbqty + damaged + missing))
    {
        alert("Quantity input is less than quantity in bin. Is there missing/damaged product?");
        damaged = prompt("Enter Damaged Quantity");
        missing = prompt("Enter Missing Quantity")
        document.getElementById("damaged").value = damaged; 
        
        return false;
    }
    return true;
}
    
    </script>

{% endblock %}


